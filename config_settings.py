"""
Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
"""

from pathlib import Path
import os

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
# ==========================================

# Ù…Ø³Ø§Ø± Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
PROJECT_ROOT = Path(__file__).parent.absolute()

# Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
PROJECT_NAME = "5A Diamond System Pro"
PROJECT_VERSION = "2.0.0"

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù…
# ==========================================

# Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
SERVER_HOST = os.getenv("SERVER_HOST", "0.0.0.0")
SERVER_PORT = int(os.getenv("SERVER_PORT", 8001))
DEBUG = os.getenv("DEBUG", "False").lower() == "true"

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
# ==========================================

# Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
DATA_DIR = PROJECT_ROOT / ".billiards_data"
DATA_DIR.mkdir(exist_ok=True)

# Ù…Ø³Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
BILLIARDS_DB_PATH = DATA_DIR / "billiards.db"

# Ù…Ø³Ø§Ø± Ø§Ù„ØªØ³Ø¯ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©
SHOTS_JSON_PATH = DATA_DIR / "shots.json"

# Ù…Ø³Ø§Ø± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
STATS_JSON_PATH = DATA_DIR / "statistics.json"

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª CORS
# ==========================================

CORS_ORIGINS = [
    "http://localhost",
    "http://localhost:3000",
    "http://localhost:8000",
    "http://localhost:8001",
    "http://127.0.0.1",
    "http://127.0.0.1:3000",
    "http://127.0.0.1:8000",
    "http://127.0.0.1:8001",
]

CORS_ALLOW_CREDENTIALS = True
CORS_ALLOW_METHODS = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS = ["Content-Type", "Authorization", "X-Requested-With"]

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ
# ==========================================

# Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù† Ø§Ù„Ù…Ø³Ù…ÙˆØ­
MIN_RAILS = 1
MAX_RAILS = 4

# Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹ (0-10)
MIN_POSITION = 0.0
MAX_POSITION = 10.0

# Ø¹Ø¯Ø¯ Ø§Ù„Ø¬ÙŠÙˆØ¨ Ø§Ù„Ù…Ø³Ù…ÙˆØ­
MIN_POCKET = 0
MAX_POCKET = 5

# Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„ØµØ¹ÙˆØ¨Ø©
DIFFICULTY_LEVELS = ["Ø³Ù‡Ù„Ø©", "Ù…ØªÙˆØ³Ø·Ø©", "ØµØ¹Ø¨Ø©", "Ø¬Ø¯Ø§Ù‹ ØµØ¹Ø¨Ø©", "Ù‚ØµÙˆÙ‰"]

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
# ==========================================

# ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
DATETIME_FORMAT = "%Y-%m-%d %H:%M:%S"

# Ø­Ø¬Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
DEFAULT_PAGE_SIZE = 100

# Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø­Ø¬Ù… Ø§Ù„ØµÙØ­Ø©
MAX_PAGE_SIZE = 500

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø¬Ù„
# ==========================================

LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")

LOG_FORMAT = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

LOG_DATE_FORMAT = "%Y-%m-%d %H:%M:%S"

# Ù…Ø³Ø§Ø± Ù…Ù„Ù Ø§Ù„Ø³Ø¬Ù„
LOG_FILE = PROJECT_ROOT / "billiards.log"

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨
# ==========================================

# Ø£ÙˆØ²Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
CUE_WEIGHT = 1.0  # ÙˆØ²Ù† Ø§Ù„Ø¹ØµØ§
DIFFICULTY_MULTIPLIER = 0.5  # Ù…Ø¶Ø§Ø¹Ù Ø§Ù„ØµØ¹ÙˆØ¨Ø©
RAIL_MULTIPLIER = 0.25  # Ù…Ø¶Ø§Ø¹Ù Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†

# Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ ÙˆØ§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­
MIN_SUCCESS_RATE = 10.0  # 10%
MAX_SUCCESS_RATE = 95.0  # 95%

# ==========================================
# Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
# ==========================================

# Ù…ÙØªØ§Ø­ Ø³Ø±ÙŠ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…ØªØºÙŠØ± Ø¨ÙŠØ¦ÙŠ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬)
SECRET_KEY = os.getenv("SECRET_KEY", "")

if not SECRET_KEY and not DEBUG:
    raise ValueError(
        "âŒ Ø®Ø·Ø£: SECRET_KEY Ù…Ø·Ù„ÙˆØ¨ ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬"
        "\nØ£Ø¶Ù SECRET_KEY ÙÙŠ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©"
    )

# ==========================================
# Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
# ==========================================

# Ø­Ø¯ Ø£Ù‚ØµÙ‰ Ù„Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù‘Ù„
MAX_UPLOAD_SIZE = 10 * 1024 * 1024  # 10 MB

# Ù…Ù‡Ù„Ø© Ø²Ù…Ù†ÙŠØ© Ù„Ù„Ø·Ù„Ø¨
REQUEST_TIMEOUT = 30  # Ø«Ø§Ù†ÙŠØ©

# ==========================================
# Ù…Ø¹Ø±Ù‘ÙØ§Øª Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
# ==========================================

ERROR_INVALID_RAILS = "Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù† ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ† 1 Ùˆ 4"
ERROR_INVALID_POSITION = "Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 10"
ERROR_INVALID_POCKET = "Ø§Ù„Ø¬ÙŠØ¨ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 5"
ERROR_INVALID_JSON = "ØµÙŠØºØ© JSON ØºÙŠØ± ØµØ­ÙŠØ­Ø©"
ERROR_NOT_FOUND = "Ø§Ù„Ø¹Ù†ØµØ± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"
ERROR_INTERNAL = "Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…"

# ==========================================
# Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­
# ==========================================

SUCCESS_SHOT_CREATED = "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ³Ø¯ÙŠÙ‚Ø© Ø¨Ù†Ø¬Ø§Ø­"
SUCCESS_RESULT_RECORDED = "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ù†Ø¬Ø§Ø­"
SUCCESS_DATA_EXPORTED = "ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"
SUCCESS_DATA_IMPORTED = "ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­"

# ==========================================
# Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
# ==========================================


def get_config():
    """Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙƒØ§Ù…Ù„Ø§Ù‹"""
    return {
        "project_name": PROJECT_NAME,
        "project_version": PROJECT_VERSION,
        "server_host": SERVER_HOST,
        "server_port": SERVER_PORT,
        "debug": DEBUG,
        "data_dir": str(DATA_DIR),
        "cors_origins": CORS_ORIGINS,
        "difficulty_levels": DIFFICULTY_LEVELS,
        "log_level": LOG_LEVEL,
    }


def validate_rails(rails: int) -> bool:
    """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ø¯Ø±Ø§Ù†"""
    return MIN_RAILS <= rails <= MAX_RAILS


def validate_position(position: float) -> bool:
    """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹"""
    return MIN_POSITION <= position <= MAX_POSITION


def validate_pocket(pocket: int) -> bool:
    """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¬ÙŠØ¨"""
    return MIN_POCKET <= pocket <= MAX_POCKET


if __name__ == "__main__":
    # Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ù…Ø¨Ø§Ø´Ø±Ø©
    print("ðŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹")
    print("="*60)
    for key, value in get_config().items():
        print(f"{key}: {value}")
